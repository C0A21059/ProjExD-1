# 第7回
## 『帰ってきた！ムキムキおにぎりくん！～とり天おむすびへの道～』"（maze.py）
### ゲーム概要（貞野、児玉）
- maze.pyを実行すると，1500x900のスクリーンにスタート画面が描画され，SPACEキーを押すと迷路ゲームが始まる。迷路内では、プレイヤーをピンクのゴール地点まで、スタミナが尽きないように進めていく。迷路には落とし穴があり、落ちてしまうと地下迷路に飛ばされ脱出しなければ元のフロアに戻れなくなってしまう。また、こうかとんにぶつかると戦闘画面が描画され、ランダムなエネミーとの戦闘が始まる。エネミーとの戦闘ではエネミーに1500~3000ダメージ与えることで、戦闘クリアとなる。迷路は階層構造となっており、いちばん上の階層でゴールするとゲームクリアとなる。

### 操作方法　
#### スタート画面
- SPACEキーを押すとゲームが始まる（山本）
#### 迷路
- 十字キーを押すとおにぎり君がその方向に移動する。（矢島）
- 移動先が壁の場合移動することができない。（矢島）
#### 戦闘画面
- aキーを押すと斬撃エフェクトが描画され、700~900ダメージをエネミーに加える。（貞野）
- mキーを押すと魔法エフェクトが描画され、400~1200ダメージをエネミーに加える。（貞野）
 
### 基本機能
- スタート画面を描画する。スペースキーを押すとゲームが始まる。(山本)
- 迷路画面を描画しおにぎりが十字キーで動けるようになっており、エネミーが任意のキーを押すと動くようになっている。
- 落とし穴を踏むと地面の色が変わり、地下ステージに移動する。(児玉)
- 戦闘画面ではaキーかmキーで攻撃を加えてモンスターを倒す。（貞野）
- プレイヤーにはHP(体力)とSP(スタミナ)が存在する。移動にはスタミナを消費する。スタミナが無くなると体力を消費して移動を始める。最大体力が設定されており、プレイヤーの体力が最大体力未満かつスタミナが存在するとき、移動するたびに体力を回復する。(山本)
‐ 体力が0になるとゲームオーバーとなり、タイトル画面に戻る。スペースキーで再スタートが可能。(山本)
― 左上に現在の階層・座標・体力・スタミナが表示されている。(山本)
― 迷路探索中、戦闘中にBGMが流れる。(越後谷)
 
### プログラム内解説
* Screenクラス：スクリーンのSurfaceオブジェクト、rectオブジェクトの保持及び初期設定を行う(矢島)
* Mazeクラス：迷路の作成、落とし穴・ゴールの設置、表示を行う。(矢島)(改訂 児玉)
* Wallクラス：壁の設定、描画を行う。(矢島)
* Roadクラス：道の設定、描画を行う。(矢島)
* Goalクラス：ゴールの設定、描画を行うを行う。(矢島)
* Holeクラス(Goalの子クラス)：落とし穴の設定、Playerと座標がかぶった際に地下迷路の描画をさせる。(児玉)
* Playerクラス：プレイヤーの設定、描画、座標の変更、敵との衝突判定を行う。(矢島)(改訂 児玉,山本,越後谷)
* Enemyクラス：敵の設定、描画、敵の座標の更新を行う。(矢島)
* Battleクラス：バトル画面の描画処理を行う。（貞野）
* BGMクラス：BGMの追加と再生を行う。(越後谷)
* main関数：ゲーム全体の流れを担当する。スクリーンやプレイヤーのインスタンスを作成する、迷路の階層を進めるなどの処理を行う。（児玉）
* play_game関数：プレイ中のゲーム進行や画面の描画を担当する。（児玉）
* create_dungeon関数：ローカルモジュール。引数で指定した数×3つ分の要素をもったリストを返す。第1引数はx方向分、第2引数はy方向分となる。要素が0の場合道を、要素が1の場合壁を表す。(山本)
* load_sound関数：効果音の追加と再生を行う。(越後谷)
 
### 参考文献
- ソーテック社「pythonで作るゲーム開発入門講座 [著]廣瀬　豪」（貞野）
 
### 使用素材
- サウンド　（CV. 越後谷）（越後谷）
 
- 以下に示す「ムキムキおにぎりくん」の画像の著作権は児玉に帰属します。（児玉）
- [mukimuki_up.png][mukimuki_down.png][mukimuki_right.png][mukimuki_left.png]
- 斬撃エフェクト（貞野）
- https://nanamiyuki.com/archives/6872
- ドラゴンの画像　（貞野）
- https://nanamiyuki.com/%E4%B8%80%E8%A6%A7%E3%83%A2%E3%83%B3%E3%82%B9%E3%82%BF%E3%83%BC%E3%82%B0%E3%83%A9%E3%83%95%E3%82%A3%E3%83%83%E3%82%AF
- 洞窟の背景　（貞野）
- http://teddy-plaza.sakura.ne.jp/wp/wp-content/uploads/2016/07/158e35945dfb441ed15105ed7c0e7849.png
- 魔法エフェクト　（貞野）
- https://nanamiyuki.com/archives/24223

